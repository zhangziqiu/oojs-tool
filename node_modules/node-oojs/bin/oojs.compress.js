!function(){var e={name:"oojs",namespace:"",$oojs:function(){if(Function.prototype.proxy=function(){var e=this,t=Array.prototype.slice.apply(arguments),n=t.shift();return function(){var s=Array.prototype.slice.apply(arguments);return e.apply(n,s.concat(t))}},"undefined"!=typeof window)this.global=window,this.runtime="browser",this.basePath="http://cpro.baidustatic.cn/js/",this.version="1.0.0",this.global.oojs=e,this.global.define=this.define.proxy(this);else if(global){var t=require("path");this.basePath=t.resolve(__dirname,"../../../src")+"/",this.global=global,this.runtime="nodejs",global.oojs=e,global.define=this.define.proxy(this);var n=module.constructor,s=n.wrap;n.wrap=function(e){return e=e.replace(/define\s*&&\s*define\s*\(/gi,"define(module,"),s(e)},module.exports=this}},fastClone:function(e){var t=function(){};t.prototype=e;var n=new t;return n},create:function(e){var t=Array.prototype.slice.call(arguments,0);t.shift();var n=e.name||"init",s=function(e){this[n]=this[n]||function(){},this[n].apply(this,e)};s.prototype=e;var i=new s(t);i.dispose=i.dispose||function(){},"browser"===this.runtime&&(window.addEventListener?window.addEventListener("unload",i.dispose.proxy(i),!1):window.attachEvent&&window.attachEvent("onunload",i.dispose.proxy(i)));for(var a in e){var r=e[a];r&&e.hasOwnProperty(a)&&"object"==typeof r&&(i[a]=this.fastClone(r))}return i.instances=null,i},define:function(e,t){t||(t=e);var n=t.name;t.namespace=t.namespace||"",t.dispose=t.dispose||function(){};var s=t.namespace.split("."),i="nodejs";"undefined"!=typeof window&&(global=window,i="browser");for(var a,r=s.length,o=global,l=0;r>l;l++)a=s[l],a&&(o[a]=o[a]||{},o=o[a]);if(o[n]=o[n]||{},o[n].name&&o[n].___registered){if(o[n].___registered&&t.classType&&"extend"===t.classType){for(var c in t)c&&t.hasOwnProperty(c)&&(o[n][c]=t[c]);t=o[n]}}else t.___registered=!0,o[n]=t;if(this.loadDeps&&t&&t.deps)this.loadDeps(t);else{var u="$"+n;t[u]&&t[u]()}return e&&(e.exports=t),this},find:function(e){var t,n=e.split(".");t=this.global[n[0]];for(var s=1,i=n.length;i>s;s++){if(!t||!t[n[s]]){t=null;break}t=t[n[s]]}return t},using:function(e){var t=this.find(e);return t||"nodejs"===this.runtime&&(require(this.getClassPath(e)),t=this.find(e)),t},getClassPath:function(e){return this.basePath+e.replace(/\./gi,"/")+".js"},config:function(e){return this.basePath=e.basePath||this.basePath,this}};e.define("undefined"!=typeof module?module:null,e)}(),define&&define({name:"event",namespace:"oojs",eventList:null,groupList:null,eventGroupIndexer:null,$event:function(){},event:function(){this.eventList={},this.groupList={},this.eventGroupIndexer={}},bind:function(e,t){var n=this.eventList[e]=this.eventList[e]||{};return(n.callbacks=n.callbacks||[]).push(t),n.status=!1,this},removeListener:function(e,t){if(this.eventList[e]){var n=this.eventList[e];if(n.callbacks&&n.callbacks.length)for(var s=0,i=n.callbacks.length;i>s;s++)if(t){if(t===n.callbacks[s]){n.callbacks[s]=null;break}}else n.callbacks[s]=null}},unbind:function(e,t){if(e||t)this.removeListener(e,t);else{var n;for(n in this.eventList)n&&this.eventList[n]&&this.eventList.hasOwnProperty(n)&&this.removeListener(n)}},emit:function(e,t){var n=this.eventList[e];if(n&&n.callbacks&&n.callbacks.length){var s=n.callbacks.length;n.data=[];for(var i=0;s>i;i++){var a=n.callbacks[i];a&&n.data.push(a(t))}n.callbacks=null,n.status=!0}for(var r,o=this.eventGroupIndexer[e]||[],i=0,l=o.length;l>i;i++)r=o[i],r&&this.groupEmit(r)},group:function(e,t,n){this.groupList[e]=this.groupList[e]||{};var s=this.groupList[e],i=s.events=s.events||{};n&&(s.callbacks=s.callbacks||[]).push(n);for(var a,t=t||[],r=0,o=t.length;o>r;r++)a=t[r],i[a]=1,(this.eventGroupIndexer[a]=this.eventGroupIndexer[a]||[]).push(e)},groupEmit:function(e){var t=this.groupList[e];if(t){var n,s,i=t.events=t.events||{},a=!0,r={};for(n in i)if(n&&i.hasOwnProperty(n)){if(s=this.eventList[n],!s||!s.status){a=!1,r=null;break}r[n]=s.data}if(n=null,a){t.callbacks=t.callbacks||[];for(var o,l=t.callbacks,c=l.length||0,u=0;c>u;u++)o=t.callbacks[u],o&&(o(r),t.callbacks[u]=null);o=null,t.callbacks=null;for(var h,f=t.afters=t.afters||[],c=f.length||0,u=0;c>u;u++)h=f[u],h&&(h(r),f[u]=null);h=null,t.afters=null}}},afterGroup:function(e,t){var n=this.groupList[e]=this.groupList[e]||{},s=n.afters=n.afters||[];s.push(t)}}),define&&define({name:"oojs",namespace:"",classType:"extend",$oojs:function(){this.ev=oojs.create(oojs.event)},loadScript:function(e,t,n){if("function"==typeof t&&(n=t,t="1.0.0"),t=t||"1.0.0",e.indexOf("http")<0&&(e=this.basePath+e.replace(/\./g,"/")+".js"),t&&(e+="?v="+t),n=n||function(){},this.ev.bind(e,function(e,t){t&&t()}.proxy(this,n)),this.loading=this.loading||{},!this.loading[e]){this.loading[e]=1;var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onerror=s.onreadystatechange=function(e,t,n){"string"==typeof e&&(t=e,n=t),/loaded|complete|undefined/.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,n=void 0,console.log(t),this.ev.emit(t,1))}.proxy(this,e,s);var i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(s,i),this}},loadDeps:function(e){var t=e.deps;if("nodejs"===this.runtime){var t=e.deps;for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=require(this.getClassPath(t[n])));var s="$"+e.name;e[s]&&e[s]()}else if(t){for(var n in t)if(n&&t.hasOwnProperty(n)){var i=t[n],a=this.using(i);if(a){e[n]=a;continue}this.ev.bind(i,function(e,t){return oojs.using(t)}.proxy(this,i)),this.ev.group("loadDeps",[i],function(e,t,n,s){s[t]=e[n][0]}.proxy(this,n,i,e)),this.ev.afterGroup("loadDeps",function(){var t="$"+e.name;e[t]&&e[t]()}.proxy(this,e));var r=this.basePath+i.replace(/\./gi,"/")+".js",o=function(e){console.log(e),this.ev.emit(e)}.proxy(this,i);this.loadScript(r,o)}}else e[s]&&e[s]();return this}});